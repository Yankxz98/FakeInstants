<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>FakeInstants - AplicaÃ§Ã£o de Ãudio Offline</title>
    <base href="~/" />

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="app.css" rel="stylesheet" />

    <!-- Favicon -->
    <link href="favicon.png" rel="icon" type="image/png" />

    <!-- PWA Manifest -->
    <link href="manifest.json" rel="manifest" />
</head>
<body>
    <div id="app">
        <div class="loading-container">
            <div class="text-center py-5">
                <div class="loading-spinner mb-3" style="width: 3rem; height: 3rem;"></div>
                <h4 class="text-primary">ðµ FakeInstants</h4>
                <p class="text-muted">Carregando aplicaÃ§Ã£o...</p>
                <div class="mt-3">
                    <small class="text-muted">Se travar aqui, clique no botÃ£o abaixo:</small><br>
                    <button class="btn btn-outline-secondary btn-sm mt-2" onclick="forceLoadApp()">
                        <i class="fas fa-exclamation-triangle me-1"></i>ForÃ§ar Carregamento
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function forceLoadApp() {
            console.log('Forcing app load...');
            // Hide loading screen and show error if Blazor fails
            setTimeout(function() {
                var loadingContainer = document.querySelector('.loading-container');
                if (loadingContainer) {
                    loadingContainer.style.display = 'none';
                }
                var errorUI = document.getElementById('blazor-error-ui');
                if (errorUI) {
                    errorUI.style.display = 'block';
                }
            }, 1000);
        }

        // Auto-force load after 10 seconds as fallback
        setTimeout(function() {
            console.log('Auto fallback: forcing app load after timeout');
            forceLoadApp();
        }, 10000);
    </script>

    <div id="blazor-error-ui" class="alert alert-danger m-3 position-fixed bottom-0 end-0" style="display: none; z-index: 9999;">
        <strong>Erro na aplicaÃ§Ã£o!</strong>
        <a href="" class="alert-link ms-2 reload">Recarregar</a>
        <button type="button" class="btn-close" onclick="document.getElementById('blazor-error-ui').style.display='none'"></button>
    </div>

    <script>
        console.log('index.html - Starting Blazor WebAssembly load...');

        // Add global error handler
        window.addEventListener('error', function(e) {
            console.error('index.html - Global error:', e.error);
        });

        window.addEventListener('unhandledrejection', function(e) {
            console.error('index.html - Unhandled promise rejection:', e.reason);
        });
    </script>

    <script src="_framework/blazor.webassembly.js" onload="console.log('Blazor WebAssembly loaded successfully')" onerror="console.error('Failed to load Blazor WebAssembly')"></script>
    <script src="audio-service.js" onload="console.log('Audio service loaded successfully')" onerror="console.error('Failed to load audio service')"></script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


